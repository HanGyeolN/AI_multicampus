## 장고 ORM 연습

예전에 만들었던 django_crud프로젝트에서 계속 진행해 줍니다.



```bash
# cd django_crud
$ activate
(venv) $ python manage.py startapp users

```



모델을 다음과 같이 설정해 줍니다.

```python
# users/models.py

from django.db import models

# Create your models here.
class User(models.Model):
    first_name = models.CharField(max_length=10)
    last_name = models.CharField(max_length=10)
    age = models.IntegerField()
    country = models.CharField(max_length=10)
    phone = models.CharField(max_length=15)
    balance = models.IntegerField()
```



```bash
(venv) $ python manage.py makemigrations
(venv) $ python manage.py migrate
```



프로젝트 폴더에 사람들 연락처가 적힌 csv파일을 놔둡니다.

![image-20191105102822944](2019-11-05_ORM연습.assets/image-20191105102822944.png)

### csv direct import in sqlite3

```bash
(venv) $ sqlite3 db.sqlite3
```

```sqlite
sqlite> .tables
articles_article            auth_user_user_permissions
articles_comment            django_admin_log
auth_group                  django_content_type
auth_group_permissions      django_migrations
auth_permission             django_session
auth_user                   jobs_job
auth_user_groups            users_user
-- 아까 ORM으로 만들었기 때문에 users_user 테이블이 있습니다.

sqlite> .mode csv -- CSV 모드로 바꿉니다.
sqlite> .import users.csv users_user -- users.csv 파일을 users_user 테이블로 import
users.csv:1: INSERT failed: datatype mismatch
sqlite> select count(*) from users_user;
100
```



### ORM 문제 풀기

```bash
$ python manage.py shell_plus
```



### tip

```python
>>> User.objects.raw('SELECT * FROM users_user') # 가능
```



[ORM 연습](ORM구문.md)

